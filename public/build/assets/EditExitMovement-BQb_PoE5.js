import{u as j,h as C,r as s,g as S,i as L,j as T,c as v,a as f,b as t,w as b,v as h,m as l,q as _,s as N,F as O,l as P,t as Q}from"./app-AxOONh59.js";import{c as z,a as g,u as A}from"./index.esm-CGQh3LpZ.js";import{d as G}from"./moment-D4kkntM3.js";const H={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},I={key:1},J={class:"container-fluid"},K={class:"row justify-content-center"},W={class:"col-12 col-xl-10"},X={class:"form-row"},Y={class:"form-group col-md-6"},Z={class:"form-group col-md-6"},ee=["value"],te={class:"form-row"},se={class:"form-group col-md-6"},ae={class:"form-group col-md-6"},le={class:"form-row"},oe={class:"col-md-6"},ne=["disabled"],pe={__name:"EditExitMovement",setup(re){const y=j(),o=C();s(null);const q=s(!0);s(!1),s(null);const x=s(""),n=s(null),F=s(1);s(15),s(0),s(!1);const k=s(null),i=s(!1);s([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const M=z({name:g().required().trim().label("Name"),plate_number:g().required().trim().label("Email"),model:g().required().trim().label("Duration"),equipment_fleet_id:g().required().trim().label("Duration")}),{defineField:r,handleSubmit:B,resetForm:ie,errors:ue,setErrors:$}=A({validationSchema:M}),[u]=r("name"),[d]=r("plate_number"),[m]=r("model"),[c]=r("equipment_fleet_id"),[R]=r("_method"),w=s();function U(){o&&o.back()}const D=B(p=>{w.value!=null&&(p.image=w.value),i.value=!0,S.post(`/api/equipments/${o.currentRoute.value.params.id}`,p,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{o.back(),y.success("Successo")}).catch(e=>{i.value=!1,y.error(`${e.response.data.message}`),e.response.data.errors&&$(e.response.data.errors)}).finally(()=>{i.value=!1})}),E=async(p=1)=>{S.get(`/api/equipments/${o.currentRoute.value.params.id}/edit`,{params:{query:x.value}}).then(e=>{n.value=e.data.equipment,u.value=n.value.name,c.value=n.value.equipment_fleet_id,d.value=n.value.plate_number,m.value=n.value.model,k.value=e.data.fleets,R.value="put",q.value=!1}).catch(e=>{q.value=!1,y.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),U()})},V=G(()=>{E(F.value)},300);return L(x,V),T(()=>{E()}),(p,e)=>q.value?(f(),v("div",H,e[5]||(e[5]=[t("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(f(),v("div",I,[t("div",J,[t("div",K,[t("div",W,[e[13]||(e[13]=t("div",{class:"row align-items-center my-4"},[t("div",{class:"col"},[t("h2",{class:"h3 mb-0 page-title"},"Criar Equipamento")])],-1)),t("form",null,[e[10]||(e[10]=t("hr",{class:"my-4"},null,-1)),e[11]||(e[11]=t("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[12]||(e[12]=t("p",{class:"mb-4"},"Espaço para lançar Equipamentos",-1)),t("div",X,[t("div",Y,[e[6]||(e[6]=t("label",{for:"firstname"},"Equipamento",-1)),b(t("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=a=>_(u)?u.value=a:null),class:"form-control"},null,512),[[h,l(u)]])]),t("div",Z,[e[7]||(e[7]=t("label",{for:"lastname"},"Frota",-1)),b(t("select",{type:"text",id:"lastname",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>_(c)?c.value=a:null)},[(f(!0),v(O,null,P(k.value,a=>(f(),v("option",{key:a.id,value:a.id},Q(a.name),9,ee))),128))],512),[[N,l(c)]])])]),t("div",te,[t("div",se,[e[8]||(e[8]=t("label",{for:"firstname"},"Modelo",-1)),b(t("input",{type:"text",id:"firstname","onUpdate:modelValue":e[2]||(e[2]=a=>_(m)?m.value=a:null),class:"form-control"},null,512),[[h,l(m)]])]),t("div",ae,[e[9]||(e[9]=t("label",{for:"lastname"},"Referência",-1)),b(t("input",{type:"text",id:"lastname","onUpdate:modelValue":e[3]||(e[3]=a=>_(d)?d.value=a:null),class:"form-control"},null,512),[[h,l(d)]])])]),t("div",le,[t("div",oe,[t("button",{type:"button",onClick:e[4]||(e[4]=(...a)=>l(D)&&l(D)(...a)),disabled:i.value,class:"btn btn-primary"},"Salvar",8,ne)])])])])])])]))}};export{pe as default};
