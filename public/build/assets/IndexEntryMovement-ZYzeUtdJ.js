import{h as x,u as w,r as a,i as D,j as E,c as o,a as r,b as t,d as M,m as q,n as B,f as C,p as h,R as N,F as S,l as V,t as l,x as $,g}from"./app-DdzN5vct.js";import{d as j,h as P}from"./moment-D4kkntM3.js";const R={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},Y={key:1},z={class:"container-fluid"},A={class:"row justify-content-center"},F={class:"col-12"},L={class:"row align-items-center my-4"},T={class:"col-auto"},I={class:"card shadow"},H={class:"card-body"},O={class:"table table-bordered table-hover"},Q={class:"mb-0"},U={class:"mb-0"},G={class:"mb-0"},J={class:"mb-0"},K={class:"mb-0"},W={class:"mb-0"},X={class:"dropdown-menu dropdown-menu-right"},Z=["onClick"],nt={__name:"IndexEntryMovement",setup(tt){const p=x(),i=w();a(null);const c=a(!0);a(!1),a(null);const m=a(""),d=a(null),v=a(1);a(15);const _=a(0);a(!1),a();function f(n){return{1:"secondary",2:"info",3:"warning",4:"success",5:"primary"}[n]||"secondary"}function b(){p&&p.back()}const u=async(n=1)=>{g.get(`/api/entrymovement?page=${n}`,{params:{query:m.value}}).then(s=>{d.value=s.data,_.value=s.data.total,c.value=!1,console.log(d.value)}).catch(s=>{c.value=!1,i.error(`${s}`),b()})},y=n=>{g.post(`/api/nextstage/${n}`).then(()=>{u(),i.success("Sucesso")}).catch(s=>{i.error(`${s}`)}).finally(()=>{})},k=j(()=>{u(v.value)},300);return D(m,k),E(()=>{u()}),(n,s)=>c.value?(r(),o("div",R,s[0]||(s[0]=[t("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(r(),o("div",Y,[t("div",z,[t("div",A,[t("div",F,[t("div",L,[s[2]||(s[2]=t("div",{class:"col"},[t("h2",{class:"h3 mb-0 page-title"}," Entradas Autorizadas ")],-1)),t("div",T,[q(h(N),{class:"btn btn-primary",to:"/ocorrencia/entrymovement/create"},{default:B(()=>s[1]||(s[1]=[t("span",{class:"fe fe-filter fe-12 mr-2"},null,-1),C("Criar ",-1)])),_:1,__:[1]})])]),t("div",I,[t("div",H,[t("table",O,[s[5]||(s[5]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Equipamento"),t("th",null,"Frota"),t("th",null,"Estado"),t("th",null,"Observação"),t("th",null,"Data"),t("th",null,"Action")])],-1)),t("tbody",null,[(r(!0),o(S,null,V(d.value.data,e=>(r(),o("tr",null,[t("td",null,[t("p",Q,l(e.id),1)]),t("td",null,[t("p",U,l(e.equipment.name),1)]),t("td",null,[t("p",G,l(e.equipment.fleet.name),1)]),t("td",null,[t("p",J,[t("span",{class:$(["badge","badge-"+f(e.equipment_movement_status_id)])},l(e.status.name),3)])]),t("td",null,[t("p",K,l(e.observation),1)]),t("td",null,[t("p",W,l(h(P)(e.created_at).format("DD-MM-YYYY H:mm")),1)]),t("td",null,[s[4]||(s[4]=t("button",{class:"btn btn-sm dropdown-toggle more-horizontal",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[t("span",{class:"text-muted sr-only"},"Action")],-1)),t("div",X,[t("button",{class:"dropdown-item",onClick:st=>y(e.id)},"Próximo Estágio",8,Z),s[3]||(s[3]=t("a",{class:"dropdown-item",href:"#"},"Verificar",-1))])])]))),256))])])])]),s[6]||(s[6]=M('<nav aria-label="Table Paging" class="my-3"><ul class="pagination justify-content-end mb-0"><li class="page-item"><a class="page-link" href="#">Previous</a></li><li class="page-item active"><a class="page-link" href="#">1</a></li><li class="page-item"><a class="page-link" href="#">2</a></li><li class="page-item"><a class="page-link" href="#">3</a></li><li class="page-item"><a class="page-link" href="#">Next</a></li></ul></nav>',1))])])])]))}};export{nt as default};
