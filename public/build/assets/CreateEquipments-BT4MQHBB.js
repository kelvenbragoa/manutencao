import{h as $,u as j,r as s,g as S,i as L,j as R,c as i,a as u,b as t,w as d,v as q,p as o,q as m,s as N,F as O,l as I,t as P}from"./app-DMvC9aVn.js";import{c as Q,a as c,u as z}from"./index.esm-DwPsDFS-.js";import{d as A}from"./moment-D4kkntM3.js";import{p as G,f as H,i as J}from"./parseISO-B0NupkFu.js";const K={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},W={key:1},X={class:"container-fluid"},Z={class:"row justify-content-center"},ee={class:"col-12 col-xl-10"},te={class:"form-row"},se={class:"form-group col-md-6"},ae={class:"form-group col-md-6"},le=["value"],oe={class:"form-row"},ne={class:"form-group col-md-6"},re={class:"form-group col-md-6"},ie={class:"form-row"},ue={class:"col-md-6"},de=["disabled"],ge={__name:"CreateEquipments",setup(me){const p=$(),f=j();s(null);const v=s(!0);s(!1),s(null);const h=s(""),E=s(null),F=s(1);s(15),s(0),s(!1);const D=s(null),n=s(!1);s([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const x=s(),k=s();s(null),s(null);function B(l){const e=typeof l=="string"?G(l):l;return J(e)?H(e,"yyyy-MM-dd"):""}const V=Q({name:c().required().trim().label("Name"),plate_number:c().required().trim().label("Email"),model:c().required().trim().label("Duration"),equipment_fleet_id:c().required().trim().label("Duration")}),{defineField:r,handleSubmit:U,resetForm:ce,errors:pe,setErrors:C}=z({validationSchema:V}),[b]=r("name"),[y]=r("plate_number"),[g]=r("model"),[_]=r("equipment_fleet_id");function T(){p&&p.back()}const M=U(l=>{x.value!=null&&(l.image=x.value),k.value!=null&&(l.video=k.value),l.birthdate=B(l.birthdate),n.value=!0,S.post("/api/equipments",l,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{p.back(),f.success("Successo")}).catch(e=>{n.value=!1,f.error(`${e.response.data.message}`),e.response.data.errors&&C(e.response.data.errors)}).finally(()=>{n.value=!1})}),w=async(l=1)=>{S.get("/api/equipments/create",{params:{query:h.value}}).then(e=>{E.value=e.data.fleets,D.value=e.data.fleets,v.value=!1}).catch(e=>{v.value=!1,f.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),T()})},Y=A(()=>{w(F.value)},300);return L(h,Y),R(()=>{w()}),(l,e)=>v.value?(u(),i("div",K,e[5]||(e[5]=[t("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(u(),i("div",W,[t("div",X,[t("div",Z,[t("div",ee,[e[13]||(e[13]=t("div",{class:"row align-items-center my-4"},[t("div",{class:"col"},[t("h2",{class:"h3 mb-0 page-title"},"Criar Equipamento")])],-1)),t("form",null,[e[10]||(e[10]=t("hr",{class:"my-4"},null,-1)),e[11]||(e[11]=t("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[12]||(e[12]=t("p",{class:"mb-4"},"Espaço para lançar Equipamentos",-1)),t("div",te,[t("div",se,[e[6]||(e[6]=t("label",{for:"firstname"},"Equipamento",-1)),d(t("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=a=>m(b)?b.value=a:null),class:"form-control"},null,512),[[q,o(b)]])]),t("div",ae,[e[7]||(e[7]=t("label",{for:"lastname"},"Frota",-1)),d(t("select",{type:"text",id:"lastname",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>m(_)?_.value=a:null)},[(u(!0),i(O,null,I(D.value,a=>(u(),i("option",{key:a.id,value:a.id},P(a.name),9,le))),128))],512),[[N,o(_)]])])]),t("div",oe,[t("div",ne,[e[8]||(e[8]=t("label",{for:"firstname"},"Modelo",-1)),d(t("input",{type:"text",id:"firstname","onUpdate:modelValue":e[2]||(e[2]=a=>m(g)?g.value=a:null),class:"form-control"},null,512),[[q,o(g)]])]),t("div",re,[e[9]||(e[9]=t("label",{for:"lastname"},"Referência",-1)),d(t("input",{type:"text",id:"lastname","onUpdate:modelValue":e[3]||(e[3]=a=>m(y)?y.value=a:null),class:"form-control"},null,512),[[q,o(y)]])])]),t("div",ie,[t("div",ue,[t("button",{type:"button",onClick:e[4]||(e[4]=(...a)=>o(M)&&o(M)(...a)),disabled:n.value,class:"btn btn-primary"},"Salvar",8,de)])])])])])])]))}};export{ge as default};
