import{h as F,u as T,r as t,g as h,i as Y,j as $,c as _,a as q,b as s,m as j,q as k,p as l,w as O,v as U}from"./app-DdzN5vct.js";import{c as L,a as w,u as N}from"./index.esm-CYUM8zWJ.js";import{d as R}from"./moment-D4kkntM3.js";import{s as I}from"./default-B-5IuFw3.js";import{p as P,f as Q,i as z}from"./parseISO-B0NupkFu.js";const A={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},G={key:1},H={class:"container-fluid"},J={class:"row justify-content-center"},K={class:"col-12 col-xl-10"},W={class:"form-row"},X={class:"form-group col-md-12"},Z={class:"form-row"},ee={class:"form-group col-md-12"},se={class:"form-row"},te={class:"col-md-6"},ae=["disabled"],ce={__name:"CreateEntryMovement",setup(oe){const n=F(),i=T();t(null);const u=t(!0);t(!1),t(null);const c=t(""),D=t(null),x=t(1);t(15),t(0),t(!1);const p=t(null),r=t(!1);t([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const v=t(),f=t();t(null),t(null);function M(a){const e=typeof a=="string"?P(a):a;return z(e)?Q(e,"yyyy-MM-dd"):""}const E=L({observation:w().required().trim().label("Email"),equipment_id:w().required().trim().label("Duration")}),{defineField:b,handleSubmit:S,resetForm:le,errors:re,setErrors:V}=N({validationSchema:E}),[d]=b("observation"),[m]=b("equipment_id");function B(){n&&n.back()}const y=S(a=>{v.value!=null&&(a.image=v.value),f.value!=null&&(a.video=f.value),a.birthdate=M(a.birthdate),r.value=!0,h.post("/api/entrymovement",a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{n.back(),i.success("Successo")}).catch(e=>{r.value=!1,i.error(`${e.response.data.message}`),e.response.data.errors&&V(e.response.data.errors)}).finally(()=>{r.value=!1})}),g=async(a=1)=>{h.get("/api/entrymovement/create",{params:{query:c.value}}).then(e=>{D.value=e.data.equipments,p.value=e.data.equipments,u.value=!1}).catch(e=>{u.value=!1,i.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),B()})},C=R(()=>{g(x.value)},300);return Y(c,C),$(()=>{g()}),(a,e)=>u.value?(q(),_("div",A,e[3]||(e[3]=[s("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(q(),_("div",G,[s("div",H,[s("div",J,[s("div",K,[e[9]||(e[9]=s("div",{class:"row align-items-center my-4"},[s("div",{class:"col"},[s("h2",{class:"h3 mb-0 page-title"},"Criar Entradas")])],-1)),s("form",null,[e[6]||(e[6]=s("hr",{class:"my-4"},null,-1)),e[7]||(e[7]=s("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[8]||(e[8]=s("p",{class:"mb-4"},"Espaço para lançar Entradas",-1)),s("div",W,[s("div",X,[e[4]||(e[4]=s("label",{for:"equipment_id"},"Equipamentos",-1)),j(l(I),{modelValue:l(m),"onUpdate:modelValue":e[0]||(e[0]=o=>k(m)?m.value=o:null),options:p.value,"value-prop":"id",label:"name","track-by":"name",placeholder:"Selecione o equipamento",searchable:!0,"can-clear":!0},null,8,["modelValue","options"])])]),s("div",Z,[s("div",ee,[e[5]||(e[5]=s("label",{for:"observation"},"Observação",-1)),O(s("textarea",{type:"text",rows:"10",id:"observation","onUpdate:modelValue":e[1]||(e[1]=o=>k(d)?d.value=o:null),class:"form-control"},null,512),[[U,l(d)]])])]),s("div",se,[s("div",te,[s("button",{type:"button",onClick:e[2]||(e[2]=(...o)=>l(y)&&l(y)(...o)),disabled:r.value,class:"btn btn-primary"},"Salvar",8,ae)])])])])])])]))}};export{ce as default};
