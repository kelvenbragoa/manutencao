import{h as j,u as A,r as t,g as _,i as L,j as P,c as M,a as S,b as s,w as u,v as w,m as o,q as d,s as T}from"./app-CkKbduy8.js";import{c as z,a as m,u as O}from"./index.esm-Bss6mGRR.js";import"./moment-BLMuvzoS.js";import{d as I}from"./debounce-BMmXVQ06.js";const Q={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},W={key:1},G={class:"container-fluid"},H={class:"row justify-content-center"},J={class:"col-12 col-xl-10"},K={class:"form-row"},X={class:"form-group col-md-6"},Y={class:"form-group col-md-6"},Z={class:"form-row"},ee={class:"form-group col-md-6"},se={class:"form-group col-md-6"},te={class:"form-row"},le={class:"form-group col-md-6"},ae={class:"form-row"},oe={class:"col-md-6"},re=["disabled"],ve={__name:"CreateVehicles",setup(ne){const c=j(),f=A();t(null);const v=t(!0);t(!1),t(null);const k=t(""),q=t(null),D=t(1);t(15),t(0),t(!1);const U=t(null),r=t(!1);t([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const n=t();t();const V=t(null);t(null);const B=z({owner:m().required().trim().label("Owner"),plate_number:m().required().trim().label("Plate Number"),make:m().required().trim().label("Make"),status:m().required().trim().label("Status")}),{defineField:i,handleSubmit:F,resetForm:ie,errors:ue,setErrors:C}=O({validationSchema:B}),[p]=i("owner"),[b]=i("plate_number"),[g]=i("make"),[y]=i("status");function E(){c&&c.back()}const N=a=>{const e=a.target.files[0];if(n.value=e,console.log(n.value),e&&e.type.startsWith("image/")){const l=new FileReader;l.onload=$=>{V.value=$.target.result},l.readAsDataURL(e)}},x=F(a=>{n.value!=null&&(a.image=n.value),r.value=!0,_.post("/api/vehicles",a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{c.back(),f.success("Successo")}).catch(e=>{r.value=!1,f.error(`${e.response.data.message}`),e.response.data.errors&&C(e.response.data.errors)}).finally(()=>{r.value=!1})}),h=async(a=1)=>{_.get("/api/vehicles/create",{params:{query:k.value}}).then(e=>{q.value=e.data.fleets,U.value=e.data.fleets,v.value=!1}).catch(e=>{v.value=!1,f.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),E()})},R=I(()=>{h(D.value)},300);return L(k,R),P(()=>{h()}),(a,e)=>v.value?(S(),M("div",Q,e[6]||(e[6]=[s("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(S(),M("div",W,[s("div",G,[s("div",H,[s("div",J,[e[16]||(e[16]=s("div",{class:"row align-items-center my-4"},[s("div",{class:"col"},[s("h2",{class:"h3 mb-0 page-title"},"Criar Equipamento")])],-1)),s("form",null,[e[13]||(e[13]=s("hr",{class:"my-4"},null,-1)),e[14]||(e[14]=s("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[15]||(e[15]=s("p",{class:"mb-4"},"Espaço para lançar Viatura",-1)),s("div",K,[s("div",X,[e[7]||(e[7]=s("label",{for:"firstname"},"Nome",-1)),u(s("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=l=>d(p)?p.value=l:null),class:"form-control"},null,512),[[w,o(p)]])]),s("div",Y,[e[9]||(e[9]=s("label",{for:"lastname"},"Estado",-1)),u(s("select",{type:"text",id:"lastname",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=l=>d(y)?y.value=l:null)},e[8]||(e[8]=[s("option",{value:"1"},"Autorizado",-1),s("option",{value:"0"},"Não Autorizado",-1)]),512),[[T,o(y)]])])]),s("div",Z,[s("div",ee,[e[10]||(e[10]=s("label",{for:"firstname"},"Modelo",-1)),u(s("input",{type:"text",id:"firstname","onUpdate:modelValue":e[2]||(e[2]=l=>d(g)?g.value=l:null),class:"form-control"},null,512),[[w,o(g)]])]),s("div",se,[e[11]||(e[11]=s("label",{for:"lastname"},"Matrícula",-1)),u(s("input",{type:"text",id:"lastname","onUpdate:modelValue":e[3]||(e[3]=l=>d(b)?b.value=l:null),class:"form-control"},null,512),[[w,o(b)]])])]),s("div",te,[s("div",le,[e[12]||(e[12]=s("label",{for:"firstname"},"Imagem",-1)),s("input",{type:"file",id:"firstname",onChange:e[4]||(e[4]=l=>N(l)),class:"form-control"},null,32)])]),s("div",ae,[s("div",oe,[s("button",{type:"button",onClick:e[5]||(e[5]=(...l)=>o(x)&&o(x)(...l)),disabled:r.value,class:"btn btn-primary"},"Salvar",8,re)])])])])])])]))}};export{ve as default};
