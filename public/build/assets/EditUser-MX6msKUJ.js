import{u as R,h as j,r as t,g as q,i as L,j as T,c as p,a as f,b as s,w as b,v as h,p as l,q as g,s as C,F as P,l as O,t as Q}from"./app-vsM4U1yu.js";import{c as z,a as y,u as A}from"./index.esm-DMsW5xLh.js";import{d as G}from"./moment-D4kkntM3.js";const H={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},I={key:1},J={class:"container-fluid"},K={class:"row justify-content-center"},W={class:"col-12 col-xl-10"},X={class:"form-row"},Y={class:"form-group col-md-6"},Z={class:"form-group col-md-6"},ee=["value"],se={class:"form-row"},te={class:"form-group col-md-6"},ae={class:"form-group col-md-6"},le={class:"form-row"},oe={class:"col-md-6"},re=["disabled"],ve={__name:"EditUser",setup(ie){const w=R(),o=j();t(null);const _=t(!0);t(!1),t(null);const x=t(""),r=t(null),B=t(1);t(15),t(0),t(!1);const k=t(null),n=t(!1);t([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const E=z({name:y().required().trim().label("Name"),email:y().required().trim().label("Email"),password:y().required().trim().label("Duration"),role_id:y().required().trim().label("Duration")}),{defineField:i,handleSubmit:F,resetForm:ne,errors:ue,setErrors:$}=A({validationSchema:E}),[u]=i("name"),[d]=i("email"),[m]=i("password"),[c]=i("role_id"),[M]=i("_method"),D=t();function V(){o&&o.back()}const S=F(v=>{D.value!=null&&(v.image=D.value),n.value=!0,q.post(`/api/user/${o.currentRoute.value.params.id}`,v,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{o.back(),w.success("Successo")}).catch(e=>{n.value=!1,w.error(`${e.response.data.message}`),e.response.data.errors&&$(e.response.data.errors)}).finally(()=>{n.value=!1})}),U=async(v=1)=>{q.get(`/api/user/${o.currentRoute.value.params.id}/edit`,{params:{query:x.value}}).then(e=>{r.value=e.data.user,u.value=r.value.name,c.value=r.value.role_id,d.value=r.value.email,m.value=r.value.password,k.value=e.data.roles,M.value="put",_.value=!1}).catch(e=>{_.value=!1,w.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),V()})},N=G(()=>{U(B.value)},300);return L(x,N),T(()=>{U()}),(v,e)=>_.value?(f(),p("div",H,e[5]||(e[5]=[s("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(f(),p("div",I,[s("div",J,[s("div",K,[s("div",W,[e[13]||(e[13]=s("div",{class:"row align-items-center my-4"},[s("div",{class:"col"},[s("h2",{class:"h3 mb-0 page-title"},"Editar Usuário")])],-1)),s("form",null,[e[10]||(e[10]=s("hr",{class:"my-4"},null,-1)),e[11]||(e[11]=s("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[12]||(e[12]=s("p",{class:"mb-4"},"Usuários",-1)),s("div",X,[s("div",Y,[e[6]||(e[6]=s("label",{for:"firstname"},"Nome",-1)),b(s("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=a=>g(u)?u.value=a:null),class:"form-control"},null,512),[[h,l(u)]])]),s("div",Z,[e[7]||(e[7]=s("label",{for:"lastname"},"Nível",-1)),b(s("select",{type:"text",id:"lastname",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>g(c)?c.value=a:null)},[(f(!0),p(P,null,O(k.value,a=>(f(),p("option",{key:a.id,value:a.id},Q(a.name),9,ee))),128))],512),[[C,l(c)]])])]),s("div",se,[s("div",te,[e[8]||(e[8]=s("label",{for:"email"},"Email",-1)),b(s("input",{type:"text",id:"email","onUpdate:modelValue":e[2]||(e[2]=a=>g(d)?d.value=a:null),class:"form-control"},null,512),[[h,l(d)]])]),s("div",ae,[e[9]||(e[9]=s("label",{for:"password"},"Password",-1)),b(s("input",{type:"text",id:"password","onUpdate:modelValue":e[3]||(e[3]=a=>g(m)?m.value=a:null),class:"form-control"},null,512),[[h,l(m)]])])]),s("div",le,[s("div",oe,[s("button",{type:"button",onClick:e[4]||(e[4]=(...a)=>l(S)&&l(S)(...a)),disabled:n.value,class:"btn btn-primary"},"Salvar",8,re)])])])])])])]))}};export{ve as default};
