import{z as B,c,e as $,a as d,b as t,x as f,F as q,l as D,t as u,h as E,u as R,r as n,i as M,j,J as A,n as k,p as P,f as x,m as _,R as w,g as T}from"./app-CkKbduy8.js";import{h as V}from"./moment-BLMuvzoS.js";import{d as Y}from"./debounce-BMmXVQ06.js";const z={key:0,"aria-label":"Table Paging",class:"my-3"},F={class:"pagination justify-content-end mb-0"},I=["disabled"],L=["onClick"],S=["disabled"],H={__name:"PaginationSimple",props:{currentPage:{type:Number,required:!0},lastPage:{type:Number,required:!0},delta:{type:Number,default:2}},emits:["navigate"],setup(a,{emit:v}){const o=a,b=v,p=B(()=>{const l=[],r=Math.max(1,o.currentPage-o.delta),s=Math.min(o.lastPage,o.currentPage+o.delta);for(let g=r;g<=s;g++)l.push(g);return l});function m(l){l<1||l>o.lastPage||l===o.currentPage||b("navigate",l)}return(l,r)=>a.lastPage>1?(d(),c("nav",z,[t("ul",F,[t("li",{class:f(["page-item",{disabled:a.currentPage===1}])},[t("button",{class:"page-link",type:"button",onClick:r[0]||(r[0]=s=>m(a.currentPage-1)),disabled:a.currentPage===1}," Previous ",8,I)],2),(d(!0),c(q,null,D(p.value,s=>(d(),c("li",{key:s,class:f(["page-item",{active:s===a.currentPage}])},[t("button",{class:"page-link",type:"button",onClick:g=>m(s)},u(s),9,L)],2))),128)),t("li",{class:f(["page-item",{disabled:a.currentPage===a.lastPage}])},[t("button",{class:"page-link",type:"button",onClick:r[1]||(r[1]=s=>m(a.currentPage+1)),disabled:a.currentPage===a.lastPage}," Next ",8,S)],2)])])):$("",!0)}},J={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},Q={key:1},U={class:"container-fluid"},G={class:"row justify-content-center"},K={class:"col-12"},O={class:"row align-items-center my-4"},W={class:"col-auto"},X={class:"card shadow"},Z={class:"card-body"},tt={class:"table table-bordered table-hover"},et={class:"mb-0"},at={class:"mb-0"},st={class:"mb-0"},nt={class:"mb-0"},lt={class:"mb-0"},ot={class:"mb-0"},rt={class:"dropdown-menu dropdown-menu-right"},it={class:"dropdown-item",href:"#"},mt={__name:"IndexEquipments",setup(a){const v=E(),o=R();n(null);const b=n(!0);n(!1),n(null);const p=n(""),m=n(null),l=n(1);n(15);const r=n(0);n(!1),n();const s=n({data:[],links:[],current_page:1,last_page:1,total:0});function g(h){page.value=h}function N(){v&&v.back()}const y=async(h=1)=>{T.get(`/api/equipments?page=${h}`,{params:{query:p.value}}).then(e=>{m.value=e.data,r.value=e.data.total,b.value=!1,s.value=e.data}).catch(e=>{b.value=!1,o.error(`${e}`),N()})},C=Y(()=>{y(l.value)},300);return M(p,C),j(()=>{y()}),(h,e)=>b.value?(d(),c("div",J,e[0]||(e[0]=[t("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(d(),c("div",Q,[t("div",U,[t("div",G,[t("div",K,[t("div",O,[e[2]||(e[2]=t("div",{class:"col"},[t("h2",{class:"h3 mb-0 page-title"},"Equipamentos")],-1)),t("div",W,[k(_(w),{class:"btn btn-primary",to:"/admin/equipments/create"},{default:P(()=>e[1]||(e[1]=[t("span",{class:"fe fe-filter fe-12 mr-2"},null,-1),x("Criar ",-1)])),_:1,__:[1]})])]),t("div",X,[t("div",Z,[t("table",tt,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Equipamento"),t("th",null,"Frota"),t("th",null,"Ref"),t("th",null,"Estado"),t("th",null,"Data"),t("th",null,"Action")])],-1)),t("tbody",null,[(d(!0),c(q,null,D(m.value.data,i=>(d(),c("tr",null,[t("td",null,[t("p",et,u(i.id),1)]),t("td",null,[t("p",at,u(i.name),1)]),t("td",null,[t("p",st,u(i.fleet.name),1)]),t("td",null,[t("p",nt,u(i.plate_number),1)]),t("td",null,[t("p",lt,u(i.status==1?"Ativo":"Inativo"),1)]),t("td",null,[t("p",ot,u(_(V)(i.created_at).format("DD-MM-YYYY H:mm")),1)]),t("td",null,[e[5]||(e[5]=t("button",{class:"btn btn-sm dropdown-toggle more-horizontal",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[t("span",{class:"text-muted sr-only"},"Action")],-1)),t("div",rt,[k(_(w),{class:"dropdown-item",to:"/admin/equipments/"+i.id+"/edit"},{default:P(()=>e[3]||(e[3]=[x("Editar",-1)])),_:2,__:[3]},1032,["to"]),e[4]||(e[4]=t("a",{class:"dropdown-item",href:"#"},"Remover",-1)),t("a",it,u(i.status==1?"Desativar":"Ativar"),1)])])]))),256))])])])]),s.value.links?(d(),A(H,{key:0,links:s.value.links,onNavigate:g},null,8,["links"])):$("",!0)])])])]))}};export{mt as default};
