import{h as Y,u as $,r as s,g as D,i as j,j as L,c as r,a as n,b as t,w as k,s as O,p as i,q,F as U,l as R,t as w,v as I}from"./app-B2f5Ay6s.js";import{c as N,a as x,u as P}from"./index.esm-fTKqNoFF.js";import{d as Q}from"./moment-D4kkntM3.js";import{p as z,f as A,i as G}from"./parseISO-B0NupkFu.js";const H={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},J={key:1},K={class:"container-fluid"},W={class:"row justify-content-center"},X={class:"col-12 col-xl-10"},Z={class:"form-row"},ee={class:"form-group col-md-12"},te=["value"],se={class:"form-row"},ae={class:"form-group col-md-12"},oe={class:"form-row"},le={class:"col-md-6"},re=["disabled"],pe={__name:"CreateEntryMovement",setup(ne){const d=Y(),u=$();s(null);const m=s(!0);s(!1),s(null);const p=s(""),M=s(null),S=s(1);s(15),s(0),s(!1);const f=s(null),l=s(!1);s([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const b=s(),y=s();s(null),s(null);function E(a){const e=typeof a=="string"?z(a):a;return G(e)?A(e,"yyyy-MM-dd"):""}const B=N({observation:x().required().trim().label("Email"),equipment_id:x().required().trim().label("Duration")}),{defineField:g,handleSubmit:F,resetForm:ie,errors:de,setErrors:C}=P({validationSchema:B}),[c]=g("observation"),[v]=g("equipment_id");function T(){d&&d.back()}const _=F(a=>{b.value!=null&&(a.image=b.value),y.value!=null&&(a.video=y.value),a.birthdate=E(a.birthdate),l.value=!0,D.post("/api/entrymovement",a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{d.back(),u.success("Successo")}).catch(e=>{l.value=!1,u.error(`${e.response.data.message}`),e.response.data.errors&&C(e.response.data.errors)}).finally(()=>{l.value=!1})}),h=async(a=1)=>{D.get("/api/entrymovement/create",{params:{query:p.value}}).then(e=>{M.value=e.data.equipments,f.value=e.data.equipments,m.value=!1}).catch(e=>{m.value=!1,u.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),T()})},V=Q(()=>{h(S.value)},300);return j(p,V),L(()=>{h()}),(a,e)=>m.value?(n(),r("div",H,e[3]||(e[3]=[t("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(n(),r("div",J,[t("div",K,[t("div",W,[t("div",X,[e[9]||(e[9]=t("div",{class:"row align-items-center my-4"},[t("div",{class:"col"},[t("h2",{class:"h3 mb-0 page-title"},"Criar Entradas")])],-1)),t("form",null,[e[6]||(e[6]=t("hr",{class:"my-4"},null,-1)),e[7]||(e[7]=t("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[8]||(e[8]=t("p",{class:"mb-4"},"Espaço para lançar Entradas",-1)),t("div",Z,[t("div",ee,[e[4]||(e[4]=t("label",{for:"equipment_id"},"Equipamentos",-1)),k(t("select",{type:"text",id:"equipment_id",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>q(v)?v.value=o:null)},[(n(!0),r(U,null,R(f.value,o=>(n(),r("option",{key:o.id,value:o.id},w(o.name)+" - "+w(o.plate_number),9,te))),128))],512),[[O,i(v)]])])]),t("div",se,[t("div",ae,[e[5]||(e[5]=t("label",{for:"observation"},"Observação",-1)),k(t("textarea",{type:"text",rows:"10",id:"observation","onUpdate:modelValue":e[1]||(e[1]=o=>q(c)?c.value=o:null),class:"form-control"},null,512),[[I,i(c)]])])]),t("div",oe,[t("div",le,[t("button",{type:"button",onClick:e[2]||(e[2]=(...o)=>i(_)&&i(_)(...o)),disabled:l.value,class:"btn btn-primary"},"Salvar",8,re)])])])])])])]))}};export{pe as default};
