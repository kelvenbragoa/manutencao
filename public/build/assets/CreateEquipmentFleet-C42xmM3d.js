import{h as B,u as E,r as t,g as b,i as C,j as T,c as y,a as g,b as s,w as Y,v as $,p as d,q as j}from"./app-DMvC9aVn.js";import{c as V,a as L,u as N}from"./index.esm-DwPsDFS-.js";import{d as O}from"./moment-D4kkntM3.js";import{p as R,f as U,i as I}from"./parseISO-B0NupkFu.js";const P={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},Q={key:1},z={class:"container-fluid"},A={class:"row justify-content-center"},G={class:"col-12 col-xl-10"},H={class:"form-row"},J={class:"form-group col-md-6"},K={class:"form-row"},W={class:"col-md-6"},X=["disabled"],re={__name:"CreateEquipmentFleet",setup(Z){const l=B(),r=E();t(null);const n=t(!0);t(!1),t(null);const c=t(""),h=t(null),_=t(1);t(15),t(0),t(!1);const k=t(null),o=t(!1);t([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const m=t(),f=t();t(null),t(null);function D(a){const e=typeof a=="string"?R(a):a;return I(e)?U(e,"yyyy-MM-dd"):""}const w=V({name:L().required().trim().label("Name")}),{defineField:x,handleSubmit:M,resetForm:ee,errors:se,setErrors:q}=N({validationSchema:w}),[i]=x("name");function F(){l&&l.back()}const p=M(a=>{m.value!=null&&(a.image=m.value),f.value!=null&&(a.video=f.value),a.birthdate=D(a.birthdate),o.value=!0,b.post("/api/equipmentfleet",a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{l.back(),r.success("Successo")}).catch(e=>{o.value=!1,r.error(`${e.response.data.message}`),e.response.data.errors&&q(e.response.data.errors)}).finally(()=>{o.value=!1})}),v=async(a=1)=>{b.get("/api/equipmentfleet/create",{params:{query:c.value}}).then(e=>{h.value=e.data.fleets,k.value=e.data.fleets,n.value=!1}).catch(e=>{n.value=!1,r.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),F()})},S=O(()=>{v(_.value)},300);return C(c,S),T(()=>{v()}),(a,e)=>n.value?(g(),y("div",P,e[2]||(e[2]=[s("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(g(),y("div",Q,[s("div",z,[s("div",A,[s("div",G,[e[7]||(e[7]=s("div",{class:"row align-items-center my-4"},[s("div",{class:"col"},[s("h2",{class:"h3 mb-0 page-title"},"Criar Equipamento")])],-1)),s("form",null,[e[4]||(e[4]=s("hr",{class:"my-4"},null,-1)),e[5]||(e[5]=s("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[6]||(e[6]=s("p",{class:"mb-4"},"Espaço para lançar Frotas",-1)),s("div",H,[s("div",J,[e[3]||(e[3]=s("label",{for:"firstname"},"Frota",-1)),Y(s("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=u=>j(i)?i.value=u:null),class:"form-control"},null,512),[[$,d(i)]])])]),s("div",K,[s("div",W,[s("button",{type:"button",onClick:e[1]||(e[1]=(...u)=>d(p)&&d(p)(...u)),disabled:o.value,class:"btn btn-primary"},"Salvar",8,X)])])])])])])]))}};export{re as default};
