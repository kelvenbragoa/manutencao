import{h as j,u as N,r as s,g as E,i as R,j as T,c as V,a as D,b as t,w as b,v as g,p as l,q as i,m as L}from"./app-CCEPJBg6.js";import{c as O,a as y,u as P}from"./index.esm-DNsLtp-n.js";import{d as Q}from"./moment-D4kkntM3.js";import{s as z}from"./default-DiC-XFXv.js";const A={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},G={key:1},H={class:"container-fluid"},I={class:"row justify-content-center"},J={class:"col-12 col-xl-10"},K={class:"form-row"},W={class:"form-group col-md-6"},X={class:"form-group col-md-6"},Y={class:"form-row"},Z={class:"form-group col-md-6"},ee={class:"form-group col-md-6"},te={class:"form-row"},se={class:"col-md-6"},ae=["disabled"],me={__name:"CreateEquipments",setup(le){const u=j(),d=N();s(null);const m=s(!0);s(!1),s(null);const _=s(""),S=s(null),B=s(1);s(15),s(0),s(!1);const q=s(null),n=s(!1);s([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const h=s(),k=s();s(null),s(null);const F=O({name:y().required().trim().label("Name"),plate_number:y().required().trim().label("Email"),model:y().required().trim().label("Duration")}),{defineField:r,handleSubmit:M,resetForm:oe,errors:ne,setErrors:U}=P({validationSchema:F}),[c]=r("name"),[p]=r("plate_number"),[f]=r("model"),[v]=r("equipment_fleet_id");function C(){u&&u.back()}const x=M(o=>{h.value!=null&&(o.image=h.value),k.value!=null&&(o.video=k.value),n.value=!0,E.post("/api/equipments",o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{u.back(),d.success("Successo")}).catch(e=>{n.value=!1,d.error(`${e.response.data.message}`),e.response.data.errors&&U(e.response.data.errors)}).finally(()=>{n.value=!1})}),w=async(o=1)=>{E.get("/api/equipments/create",{params:{query:_.value}}).then(e=>{S.value=e.data.fleets,q.value=e.data.fleets,m.value=!1}).catch(e=>{m.value=!1,d.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),C()})},$=Q(()=>{w(B.value)},300);return R(_,$),T(()=>{w()}),(o,e)=>m.value?(D(),V("div",A,e[5]||(e[5]=[t("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(D(),V("div",G,[t("div",H,[t("div",I,[t("div",J,[e[13]||(e[13]=t("div",{class:"row align-items-center my-4"},[t("div",{class:"col"},[t("h2",{class:"h3 mb-0 page-title"},"Criar Equipamento")])],-1)),t("form",null,[e[10]||(e[10]=t("hr",{class:"my-4"},null,-1)),e[11]||(e[11]=t("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[12]||(e[12]=t("p",{class:"mb-4"},"Espaço para lançar Equipamentos",-1)),t("div",K,[t("div",W,[e[6]||(e[6]=t("label",{for:"firstname"},"Equipamento",-1)),b(t("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=a=>i(c)?c.value=a:null),class:"form-control"},null,512),[[g,l(c)]])]),t("div",X,[e[7]||(e[7]=t("label",{for:"lastname"},"Frota",-1)),L(l(z),{modelValue:l(v),"onUpdate:modelValue":e[1]||(e[1]=a=>i(v)?v.value=a:null),options:q.value,"value-prop":"id",label:"name","track-by":"name",placeholder:"Selecione a frota",searchable:!0,"can-clear":!0},null,8,["modelValue","options"])])]),t("div",Y,[t("div",Z,[e[8]||(e[8]=t("label",{for:"firstname"},"Modelo",-1)),b(t("input",{type:"text",id:"firstname","onUpdate:modelValue":e[2]||(e[2]=a=>i(f)?f.value=a:null),class:"form-control"},null,512),[[g,l(f)]])]),t("div",ee,[e[9]||(e[9]=t("label",{for:"lastname"},"Referência",-1)),b(t("input",{type:"text",id:"lastname","onUpdate:modelValue":e[3]||(e[3]=a=>i(p)?p.value=a:null),class:"form-control"},null,512),[[g,l(p)]])])]),t("div",te,[t("div",se,[t("button",{type:"button",onClick:e[4]||(e[4]=(...a)=>l(x)&&l(x)(...a)),disabled:n.value,class:"btn btn-primary"},"Salvar",8,ae)])])])])])])]))}};export{me as default};
