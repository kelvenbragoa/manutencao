import{h as Y,u as $,r as t,g as U,i as j,j as L,c as n,a as d,b as s,w as u,v as _,m as l,q as m,s as O,F as P,l as R,t as I}from"./app-AxOONh59.js";import{c as Q,a as c,u as z}from"./index.esm-CGQh3LpZ.js";import{d as A}from"./moment-D4kkntM3.js";import{p as G,f as H,i as J}from"./parseISO-B0NupkFu.js";const K={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},W={key:1},X={class:"container-fluid"},Z={class:"row justify-content-center"},ee={class:"col-12 col-xl-10"},se={class:"form-row"},te={class:"form-group col-md-6"},ae={class:"form-group col-md-6"},oe=["value"],le={class:"form-row"},re={class:"form-group col-md-6"},ie={class:"form-group col-md-6"},ne={class:"form-row"},de={class:"col-md-6"},ue=["disabled"],ge={__name:"CreateUser",setup(me){const f=Y(),p=$();t(null);const v=t(!0);t(!1),t(null);const h=t(""),q=t(null),B=t(1);t(15),t(0),t(!1);const D=t(null),r=t(!1);t([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const x=t(),k=t();t(null),t(null);function F(o){const e=typeof o=="string"?G(o):o;return J(e)?H(e,"yyyy-MM-dd"):""}const V=Q({name:c().required().trim().label("Name"),email:c().required().trim().label("Email"),role_id:c().required().trim().label("Duration"),password:c().required().trim().label("Duration")}),{defineField:i,handleSubmit:C,resetForm:ce,errors:fe,setErrors:E}=z({validationSchema:V}),[b]=i("name"),[y]=i("email"),[g]=i("role_id"),[w]=i("password");function N(){f&&f.back()}const M=C(o=>{x.value!=null&&(o.image=x.value),k.value!=null&&(o.video=k.value),o.birthdate=F(o.birthdate),r.value=!0,U.post("/api/user",o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{f.back(),p.success("Successo")}).catch(e=>{r.value=!1,p.error(`${e.response.data.message}`),e.response.data.errors&&E(e.response.data.errors)}).finally(()=>{r.value=!1})}),S=async(o=1)=>{U.get("/api/user/create",{params:{query:h.value}}).then(e=>{q.value=e.data.roles,D.value=e.data.roles,v.value=!1}).catch(e=>{v.value=!1,p.add({severity:"error",summary:`${e}`,detail:"Message Detail",life:3e3}),N()})},T=A(()=>{S(B.value)},300);return j(h,T),L(()=>{S()}),(o,e)=>v.value?(d(),n("div",K,e[5]||(e[5]=[s("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(d(),n("div",W,[s("div",X,[s("div",Z,[s("div",ee,[e[13]||(e[13]=s("div",{class:"row align-items-center my-4"},[s("div",{class:"col"},[s("h2",{class:"h3 mb-0 page-title"},"Criar Usuário")])],-1)),s("form",null,[e[10]||(e[10]=s("hr",{class:"my-4"},null,-1)),e[11]||(e[11]=s("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[12]||(e[12]=s("p",{class:"mb-4"},"Usuários",-1)),s("div",se,[s("div",te,[e[6]||(e[6]=s("label",{for:"firstname"},"Nome",-1)),u(s("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=a=>m(b)?b.value=a:null),class:"form-control"},null,512),[[_,l(b)]])]),s("div",ae,[e[7]||(e[7]=s("label",{for:"lastname"},"Nível",-1)),u(s("select",{type:"text",id:"lastname",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>m(g)?g.value=a:null)},[(d(!0),n(P,null,R(D.value,a=>(d(),n("option",{key:a.id,value:a.id},I(a.name),9,oe))),128))],512),[[O,l(g)]])])]),s("div",le,[s("div",re,[e[8]||(e[8]=s("label",{for:"email"},"Email",-1)),u(s("input",{type:"text",id:"email","onUpdate:modelValue":e[2]||(e[2]=a=>m(y)?y.value=a:null),class:"form-control"},null,512),[[_,l(y)]])]),s("div",ie,[e[9]||(e[9]=s("label",{for:"password"},"Password",-1)),u(s("input",{type:"text",id:"password","onUpdate:modelValue":e[3]||(e[3]=a=>m(w)?w.value=a:null),class:"form-control"},null,512),[[_,l(w)]])])]),s("div",ne,[s("div",de,[s("button",{type:"button",onClick:e[4]||(e[4]=(...a)=>l(M)&&l(M)(...a)),disabled:r.value,class:"btn btn-primary"},"Salvar",8,ue)])])])])])])]))}};export{ge as default};
