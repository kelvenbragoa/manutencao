import{u as f,r as e,o as b,c as t,a as l,b as o,d as w,e as v,t as x,w as m,v as p,f as y,g as h}from"./app-DAvsvyGq.js";const k={class:"wrapper vh-100"},_={class:"row align-items-center h-100"},S={class:"col-lg-3 col-md-4 col-10 mx-auto text-center"},E={key:0},V={class:"form-group"},B={class:"form-group"},N={key:2,class:"btn btn-lg btn-primary btn-block",type:"button",disabled:""},I={__name:"Login",setup(P){const c=f(),r=e(""),n=e("");e(!1);const i=e(!1),d=e(""),g=()=>{i.value=!0,h.post("/api/login",{email:r.value.toLowerCase(),password:n.value}).then(a=>{localStorage.setItem("token",a.data.access_token),localStorage.setItem("user",JSON.stringify(a.data.user)),c.success("Sucesso"),a.data.user.role_id==1?window.location.href="/admin/dashboard":a.data.user.role_id==2?window.location.href="/supervisor/dashboard":a.data.user.role_id==3?window.location.href="/ocorrencia/dashboard":a.data.user.role_id==4?window.location.href="/area/dashboard":a.data.user.role_id==5&&(window.location.href="/seguranca/dashboard")}).catch(a=>{d.value=a.response.data.message,c.error(`${a.response.data.message}`)}).finally(()=>{i.value=!1})};return b(()=>{localStorage.getItem("token")}),(a,s)=>(l(),t("div",k,[o("div",_,[o("form",S,[s[5]||(s[5]=w('<a class="navbar-brand mx-auto mt-2 flex-fill text-center" href="./index.html"><svg version="1.1" id="logo" class="navbar-brand-img brand-md" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 120 120" xml:space="preserve"><g><polygon class="st0" points="78,105 15,105 24,87 87,87 	"></polygon><polygon class="st0" points="96,69 33,69 42,51 105,51 	"></polygon><polygon class="st0" points="78,33 15,33 24,15 87,15 	"></polygon></g></svg></a>',1)),d.value?(l(),t("div",E,[o("small",null,x(d.value),1)])):v("",!0),s[6]||(s[6]=o("h1",{class:"h6 mb-3"},"Sign in",-1)),o("div",V,[s[2]||(s[2]=o("label",{for:"inputEmail",class:"sr-only"},"Email address",-1)),m(o("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=u=>r.value=u),id:"inputEmail",class:"form-control form-control-lg",placeholder:"Email address",required:"",autofocus:""},null,512),[[p,r.value]])]),o("div",B,[s[3]||(s[3]=o("label",{for:"inputPassword",class:"sr-only"},"Password",-1)),m(o("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=u=>n.value=u),id:"inputPassword",class:"form-control form-control-lg",placeholder:"Password",required:""},null,512),[[p,n.value]])]),i.value?(l(),t("button",N,s[4]||(s[4]=[o("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),y(" Entrando... ",-1)]))):(l(),t("button",{key:1,to:"/admin/dashboard",class:"btn btn-lg btn-primary btn-block",onClick:g},"Login")),s[7]||(s[7]=o("p",{class:"mt-5 mb-3 text-muted"},"Â© 2025",-1))])])]))}};export{I as default};
