import{u as C,h as N,r as t,g as M,i as R,j,c as p,a as f,b as s,w as b,v as h,p as a,q as g,s as A}from"./app-vsM4U1yu.js";import{c as I,a as y,u as T}from"./index.esm-DMsW5xLh.js";import{d as z}from"./moment-D4kkntM3.js";const L={key:0,class:"vh-100 d-flex justify-content-center align-items-center"},O={key:1},P={class:"container-fluid"},Q={class:"row justify-content-center"},G={class:"col-12 col-xl-10"},H={class:"form-row"},J={class:"form-group col-md-6"},K={class:"form-group col-md-6"},W={class:"form-row"},X={class:"form-group col-md-6"},Y={class:"form-group col-md-6"},Z={class:"form-row"},ee={class:"form-group col-md-6"},se={class:"form-row"},te={class:"form-group col-md-6"},le={key:0},oe=["src"],ae={key:1},re={class:"form-row"},ne={class:"col-md-6"},ie=["disabled"],fe={__name:"EditVehicles",setup(ue){const w=C(),r=N();t(null);const _=t(!0);t(!1),t(null);const k=t(""),o=t(null),V=t(1);t(15),t(0),t(!1),t(null);const u=t(!1);t([{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]);const $=I({owner:y().required().trim().label("Owner"),plate_number:y().required().trim().label("Plate Number"),make:y().required().trim().label("Make"),status:y().required().trim().label("Status")}),{defineField:n,handleSubmit:B,resetForm:de,errors:me,setErrors:E}=T({validationSchema:$}),[d]=n("owner"),[m]=n("plate_number"),[v]=n("make"),[c]=n("status"),[U]=n("_method"),x=t();function D(){r&&r.back()}const S=B(i=>{x.value!=null&&(i.image=x.value),u.value=!0,M.post(`/api/vehicles/${r.currentRoute.value.params.id}`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{r.back(),w.success("Successo")}).catch(e=>{u.value=!1,w.error(`${e.response.data.message}`),e.response.data.errors&&E(e.response.data.errors)}).finally(()=>{u.value=!1})}),q=async(i=1)=>{M.get(`/api/vehicles/${r.currentRoute.value.params.id}/edit`,{params:{query:k.value}}).then(e=>{o.value=e.data.vehicle,d.value=o.value.owner,c.value=o.value.status,m.value=o.value.plate_number,v.value=o.value.make,U.value="put",_.value=!1}).catch(e=>{_.value=!1,w.error(`${e}`),D()})},F=z(()=>{q(V.value)},300);return R(k,F),j(()=>{q()}),(i,e)=>_.value?(f(),p("div",L,e[6]||(e[6]=[s("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},null,-1)]))):(f(),p("div",O,[s("div",P,[s("div",Q,[s("div",G,[e[18]||(e[18]=s("div",{class:"row align-items-center my-4"},[s("div",{class:"col"},[s("h2",{class:"h3 mb-0 page-title"},"Criar Equipamento")])],-1)),s("form",null,[e[15]||(e[15]=s("hr",{class:"my-4"},null,-1)),e[16]||(e[16]=s("h5",{class:"mb-2 mt-4"},"Dados",-1)),e[17]||(e[17]=s("p",{class:"mb-4"},"Espaço para lançar Viatura",-1)),s("div",H,[s("div",J,[e[7]||(e[7]=s("label",{for:"firstname"},"Nome",-1)),b(s("input",{type:"text",id:"firstname","onUpdate:modelValue":e[0]||(e[0]=l=>g(d)?d.value=l:null),class:"form-control"},null,512),[[h,a(d)]])]),s("div",K,[e[9]||(e[9]=s("label",{for:"lastname"},"Estado",-1)),b(s("select",{type:"text",id:"lastname",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=l=>g(c)?c.value=l:null)},e[8]||(e[8]=[s("option",{value:"1"},"Autorizado",-1),s("option",{value:"0"},"Não Autorizado",-1)]),512),[[A,a(c)]])])]),s("div",W,[s("div",X,[e[10]||(e[10]=s("label",{for:"firstname"},"Modelo",-1)),b(s("input",{type:"text",id:"firstname","onUpdate:modelValue":e[2]||(e[2]=l=>g(v)?v.value=l:null),class:"form-control"},null,512),[[h,a(v)]])]),s("div",Y,[e[11]||(e[11]=s("label",{for:"lastname"},"Matrícula",-1)),b(s("input",{type:"text",id:"lastname","onUpdate:modelValue":e[3]||(e[3]=l=>g(m)?m.value=l:null),class:"form-control"},null,512),[[h,a(m)]])])]),s("div",Z,[s("div",ee,[e[12]||(e[12]=s("label",{for:"firstname"},"Imagem",-1)),s("input",{type:"file",id:"firstname",onChange:e[4]||(e[4]=l=>i.onFileUpload(l)),class:"form-control"},null,32)])]),s("div",se,[s("div",te,[e[14]||(e[14]=s("label",null,"Imagem Atual",-1)),o.value&&o.value.image?(f(),p("div",le,[s("img",{src:`/storage/${o.value.image}`,alt:"Imagem atual",style:{"max-width":"200px","max-height":"200px"}},null,8,oe)])):(f(),p("div",ae,e[13]||(e[13]=[s("span",null,"Sem imagem",-1)])))])]),s("div",re,[s("div",ne,[s("button",{type:"button",onClick:e[5]||(e[5]=(...l)=>a(S)&&a(S)(...l)),disabled:u.value,class:"btn btn-primary"},"Salvar",8,ie)])])])])])])]))}};export{fe as default};
